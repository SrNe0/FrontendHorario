{"ast":null,"code":"import { TablasComponent } from '../../../../components/tablas/tablas.component';\nimport { getEntityPropiedades } from '../../../../interfaces/acciones';\nimport { RouterOutlet } from '@angular/router';\nimport { ConfirmacionComponent } from '../../../../components/confirmacion/confirmacion.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../services/api.service\";\nimport * as i3 from \"../../../../services/delay.service\";\nexport let ProfesoresComponent = /*#__PURE__*/(() => {\n  class ProfesoresComponent {\n    router;\n    Aroute;\n    service;\n    delayService;\n    VCR;\n    constructor(router, Aroute, service, delayService, VCR) {\n      this.router = router;\n      this.Aroute = Aroute;\n      this.service = service;\n      this.delayService = delayService;\n      this.VCR = VCR;\n    }\n    url = '/profesores';\n    mensaje = '¿Estás seguro de que desea eliminar esta asignatura?';\n    showConfirmDialog = false;\n    objetoAEliminar;\n    nombreObjeto = '';\n    dataProfes = [];\n    columnas = [];\n    title = 'Profesores';\n    ngOnInit() {\n      this.columnas = getEntityPropiedades('profesores');\n      this.delayService.setViewContainerRef(this.VCR);\n      this.delayService.applyDelayWithLoading(600).subscribe(() => {\n        this.service.data$.subscribe(data => {\n          this.dataProfes = data;\n        });\n        this.service.getData(this.url).subscribe();\n      });\n    }\n    onAction(accion) {\n      this.delayService.applyDelayWithLoading(500).subscribe(() => {\n        if (accion.accion == 'Editar') {\n          this.editar(accion.fila);\n        } else if (accion.accion == 'Borrar') {\n          this.objetoAEliminar = accion.fila;\n          this.nombreObjeto = accion.fila.nombre;\n          this.showConfirmDialog = true;\n        } else if (accion.accion == 'Crear') {\n          this.crear();\n        }\n      });\n    }\n    crear() {\n      this.delayService.applyDelayWithLoading(1000).subscribe(() => {\n        this.router.navigate(['nuevo'], {\n          relativeTo: this.Aroute,\n          state: {\n            columns: this.columnas,\n            url: this.url\n          }\n        }).then(() => {\n          this.loadData();\n        });\n      });\n    }\n    editar(objeto) {\n      this.delayService.applyDelayWithLoading(1000).subscribe(() => {\n        this.router.navigate(['modificar'], {\n          relativeTo: this.Aroute,\n          state: {\n            columns: this.columnas,\n            data: objeto,\n            url: this.url\n          }\n        }).then(() => {\n          this.loadData();\n        });\n      });\n    }\n    confirmarEliminacion(confirmado) {\n      this.delayService.applyDelayWithLoading(500).subscribe(() => {\n        if (confirmado && this.objetoAEliminar) {\n          this.service.deleteDataId(this.url, this.objetoAEliminar.idProfesor).subscribe({});\n        }\n        this.showConfirmDialog = false;\n        this.objetoAEliminar = null;\n      });\n    }\n    loadData() {\n      this.delayService.applyDelayWithLoading(500).subscribe(() => {\n        this.service.getData(this.url).subscribe(data => {\n          this.dataProfes = data;\n        });\n      });\n    }\n    static ɵfac = function ProfesoresComponent_Factory(t) {\n      return new (t || ProfesoresComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.DelayService), i0.ɵɵdirectiveInject(i0.ViewContainerRef));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProfesoresComponent,\n      selectors: [[\"app-profesores\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 3,\n      vars: 6,\n      consts: [[3, \"action\", \"titulo\", \"columnas\", \"data\"], [3, \"confirm\", \"message\", \"hidden\", \"nombreObjeto\"]],\n      template: function ProfesoresComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"app-tablas\", 0);\n          i0.ɵɵlistener(\"action\", function ProfesoresComponent_Template_app_tablas_action_0_listener($event) {\n            return ctx.onAction($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(1, \"router-outlet\");\n          i0.ɵɵelementStart(2, \"app-confirmacion\", 1);\n          i0.ɵɵlistener(\"confirm\", function ProfesoresComponent_Template_app_confirmacion_confirm_2_listener($event) {\n            return ctx.confirmarEliminacion($event);\n          });\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"titulo\", ctx.title)(\"columnas\", ctx.columnas)(\"data\", ctx.dataProfes);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"message\", ctx.mensaje)(\"hidden\", !ctx.showConfirmDialog)(\"nombreObjeto\", ctx.nombreObjeto);\n        }\n      },\n      dependencies: [TablasComponent, RouterOutlet, ConfirmacionComponent]\n    });\n  }\n  return ProfesoresComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}