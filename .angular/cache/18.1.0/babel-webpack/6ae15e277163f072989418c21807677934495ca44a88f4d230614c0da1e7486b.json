{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../services/api.service\";\nfunction ModifyComponent_For_4_Conditional_0_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 8)(4, \"option\", 9);\n    i0.ɵɵtext(5, \"Si\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"option\", 10);\n    i0.ɵɵtext(7, \"No\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"for\", item_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.getColumnName(item_r1).charAt(0).toUpperCase() + ctx_r1.getColumnName(item_r1).slice(1));\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"id\", item_r1);\n    i0.ɵɵpropertyInterpolate(\"formControlName\", item_r1);\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_4_For_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const asignatura_r3 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", asignatura_r3.codigo);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(asignatura_r3.nombre);\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵrepeaterCreate(0, ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_4_For_1_Template, 2, 2, \"option\", 12, i0.ɵɵrepeaterTrackByIndex);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(4);\n    i0.ɵɵrepeater(ctx_r1.dataAsignaturas);\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_5_For_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const edificio_r4 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", edificio_r4.nombre);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(edificio_r4.nombre);\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵrepeaterCreate(0, ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_5_For_1_Template, 2, 2, \"option\", 12, i0.ɵɵrepeaterTrackByIndex);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(4);\n    i0.ɵɵrepeater(ctx_r1.dataEdificios);\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 11);\n    i0.ɵɵtemplate(4, ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_4_Template, 2, 0)(5, ModifyComponent_For_4_Conditional_0_Conditional_1_Conditional_5_Template, 2, 0);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"for\", item_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.getColumnName(item_r1).charAt(0).toUpperCase() + ctx_r1.getColumnName(item_r1).slice(1));\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"id\", item_r1);\n    i0.ɵɵpropertyInterpolate(\"formControlName\", item_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(item_r1 === \"asignatura\" ? 4 : item_r1 === \"edificio\" ? 5 : -1);\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 8)(4, \"option\", 13);\n    i0.ɵɵtext(5, \"Admin\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"option\", 14);\n    i0.ɵɵtext(7, \"Usuario\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"for\", item_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.getColumnName(item_r1).charAt(0).toUpperCase() + ctx_r1.getColumnName(item_r1).slice(1));\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"id\", item_r1);\n    i0.ɵɵpropertyInterpolate(\"formControlName\", item_r1);\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"for\", item_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.getColumnName(item_r1).charAt(0).toUpperCase() + ctx_r1.getColumnName(item_r1).slice(1));\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"type\", ctx_r1.getypeof(ctx_r1.getNestedProperty(item_r1, ctx_r1.data)));\n    i0.ɵɵpropertyInterpolate(\"id\", item_r1);\n    i0.ɵɵpropertyInterpolate(\"formControlName\", item_r1);\n    i0.ɵɵproperty(\"placeholder\", ctx_r1.getNestedProperty(item_r1, ctx_r1.data));\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"for\", item_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.getColumnName(item_r1).charAt(0).toUpperCase() + ctx_r1.getColumnName(item_r1).slice(1));\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"type\", ctx_r1.getypeof(ctx_r1.getNestedProperty(item_r1, ctx_r1.data)));\n    i0.ɵɵpropertyInterpolate(\"id\", item_r1);\n    i0.ɵɵpropertyInterpolate(\"formControlName\", item_r1);\n    i0.ɵɵproperty(\"placeholder\", ctx_r1.getNestedProperty(item_r1, ctx_r1.data));\n  }\n}\nfunction ModifyComponent_For_4_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ModifyComponent_For_4_Conditional_0_Conditional_0_Template, 8, 4, \"div\", 6)(1, ModifyComponent_For_4_Conditional_0_Conditional_1_Template, 6, 5, \"div\", 6)(2, ModifyComponent_For_4_Conditional_0_Conditional_2_Template, 8, 4, \"div\", 6)(3, ModifyComponent_For_4_Conditional_0_Conditional_3_Template, 4, 6, \"div\", 6)(4, ModifyComponent_For_4_Conditional_0_Conditional_4_Template, 4, 6, \"div\", 6);\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵconditional(item_r1 === \"necesitaComputadores\" || item_r1 === \"tieneComputadores\" ? 0 : ctx_r1.getypeof(ctx_r1.data[item_r1]) === \"object\" ? 1 : item_r1 === \"rol\" ? 2 : item_r1 === \"nombreDocente\" ? 3 : 4);\n  }\n}\nfunction ModifyComponent_For_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ModifyComponent_For_4_Conditional_0_Template, 5, 1);\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵconditional(ctx_r1.columnNameIgnore(ctx_r1.getColumnName(item_r1)) ? 0 : -1);\n  }\n}\nexport let ModifyComponent = /*#__PURE__*/(() => {\n  class ModifyComponent {\n    router;\n    formB;\n    service;\n    constructor(router, formB, service) {\n      this.router = router;\n      this.formB = formB;\n      this.service = service;\n      this.modifyData = this.formB.group({});\n    }\n    dataUpdated = new EventEmitter();\n    url;\n    modifyData;\n    data;\n    dataEdificios = [];\n    dataAsignaturas = [];\n    columnas = [];\n    ngOnInit() {\n      const state = history.state;\n      if (state) {\n        this.columnas = state.columns;\n        this.data = state.data;\n        this.url = state.url;\n      }\n      this.loadData();\n      console.log(this.data);\n      this.columnas.forEach(column => {\n        this.modifyData.addControl(column, this.formB.control(this.getNestedProperty(column, this.data), Validators.required));\n      });\n    }\n    loadData() {\n      this.service.getData('/asignaturas').subscribe(data => {\n        this.dataAsignaturas = data;\n      });\n      this.service.getData('/edificios').subscribe(data => {\n        this.dataEdificios = data;\n      });\n    }\n    getypeof(item) {\n      return typeof item;\n    }\n    getColumnName(column) {\n      return this.columnMap[column] || column;\n    }\n    cancelAction() {\n      alert('Cancelando accion');\n      this.router.navigate(['/usuario' + this.url]);\n    }\n    columnNameIgnore(item) {\n      if (item === 'Id' || item === 'Nombre del docente') {\n        return false;\n      } else {\n        return true;\n      }\n    }\n    sendAction() {\n      const modifyURL = this.url + \"/\" + this.data[this.columnas[0]];\n      console.log(modifyURL);\n      //if (this.modifyData.valid) {\n      if (true) {\n        const updatedData = {};\n        this.columnas.forEach(column => {\n          const originalValue = this.data[column];\n          const newValue = this.modifyData.get(column)?.value;\n          if (this.columnNameIgnore(this.getColumnName(column))) {\n            if (typeof originalValue === 'number') {\n              updatedData[column] = parseInt(newValue, 10);\n            } else if (column === 'edificio') {\n              const modifyColumn = 'nombre' + column.charAt(0).toUpperCase() + column.slice(1);\n              updatedData[modifyColumn] = newValue;\n            } else if (column === 'asignatura') {\n              const modifyColumn = 'codigo' + column.charAt(0).toUpperCase() + column.slice(1);\n              updatedData[modifyColumn] = newValue;\n            } else if (newValue === 'true') {\n              updatedData[column] = true;\n            } else if (newValue === 'false') {\n              updatedData[column] = false;\n            } else {\n              updatedData[column] = newValue;\n            }\n          }\n        });\n        console.log(updatedData);\n        this.service.modifyDataId(modifyURL, updatedData).subscribe({\n          next: response => {\n            this.dataUpdated.emit(this.data);\n            alert('Datos guardados con éxito');\n            this.router.navigate(['/usuario' + this.url]);\n          },\n          error: error => {\n            console.error(\"Error al modificar los datos:\", error);\n            alert('Ocurrió un error al guardar los datos.');\n          }\n        });\n      } else {\n        alert('Por favor completa todos los campos requeridos.');\n      }\n    }\n    getNestedProperty(item, data) {\n      if (typeof data[item] === 'object' && data[item] !== null) {\n        return data[item][\"nombre\"];\n      } else if (item === \"asignatura\") {\n        return data[item]['nombre'];\n      } else {\n        return data[item];\n      }\n    }\n    columnMap = {\n      idEdificio: 'Id',\n      idAsignatura: 'Id',\n      idGrupo: 'Id',\n      idAula: 'Id',\n      idProfesor: 'Id',\n      idUsuario: 'Id',\n      idHorario: 'ID',\n      horasTeoria: 'Horas Teoricas',\n      horasPractica: 'Horas Practicas',\n      nombreGrupo: 'Nombre del Grupo',\n      documentoIdentidad: 'Documento de Identidad',\n      nombreDocente: 'Nombre del docente',\n      nombreUsuario: 'Usuario',\n      contrasena: 'Contraseña',\n      horaInicio: 'Hora de Inicio',\n      horaFin: 'Hora Final',\n      necesitaComputadores: 'Necesita Computadores',\n      tieneComputadores: 'tiene Computadores',\n      codigoAsignatura: 'Codigo de la asignatura',\n      nombre1: 'Primer Nombre',\n      nombre2: 'Segundo Nombre',\n      apellido1: 'Primer Apellido',\n      apellido2: 'Segundo Apellido'\n    };\n    static ɵfac = function ModifyComponent_Factory(t) {\n      return new (t || ModifyComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ApiService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ModifyComponent,\n      selectors: [[\"app-modify\"]],\n      outputs: {\n        dataUpdated: \"dataUpdated\"\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 10,\n      vars: 1,\n      consts: [[1, \"mcontainer\", \"d-flex\", \"position-absolute\"], [1, \"content\", \"align-self-center\"], [1, \"form-body\", \"d-grid\", 3, \"ngSubmit\", \"formGroup\"], [1, \"text-center\", \"mt-3\"], [\"type\", \"submit\", \"value\", \"Enviar\", 1, \"btn\", \"btn-mstyle\", \"me-4\"], [1, \"btn\", \"btn-mdg\", \"ms-4\", 3, \"click\"], [1, \"form-group\", \"mb-3\"], [1, \"form-label\", \"ft-500\", 3, \"for\"], [\"type\", \"boolean\", 1, \"form-control\", 3, \"id\", \"formControlName\"], [\"value\", \"true\"], [\"value\", \"false\"], [\"type\", \"text\", 1, \"form-control\", 3, \"id\", \"formControlName\"], [3, \"value\"], [\"value\", \"ADMIN\"], [\"value\", \"USER\"], [1, \"form-control\", 3, \"type\", \"id\", \"placeholder\", \"formControlName\"]],\n      template: function ModifyComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"main\", 0)(1, \"div\", 1)(2, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function ModifyComponent_Template_form_ngSubmit_2_listener() {\n            return ctx.sendAction();\n          });\n          i0.ɵɵrepeaterCreate(3, ModifyComponent_For_4_Template, 1, 1, null, null, i0.ɵɵrepeaterTrackByIndex);\n          i0.ɵɵelementStart(5, \"div\", 3)(6, \"button\", 4);\n          i0.ɵɵtext(7, \"Guardar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function ModifyComponent_Template_button_click_8_listener() {\n            return ctx.cancelAction();\n          });\n          i0.ɵɵtext(9, \"Cancelar\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formGroup\", ctx.modifyData);\n          i0.ɵɵadvance();\n          i0.ɵɵrepeater(ctx.columnas);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n      styles: [\".mcontainer[_ngcontent-%COMP%]{width:100%;min-height:100vh;justify-content:center;background-color:#00000065;top:0;left:0}.content[_ngcontent-%COMP%]{width:80%;background-color:#fafff4;padding:15px 30px;border-radius:10px;border:2px solid #a7a7a7}.form-body[_ngcontent-%COMP%]{padding:25px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#161256}.form-control[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #1612562a;border-radius:8px;padding:5px 15px;transition:.5s}.form-control[_ngcontent-%COMP%]:active{background-color:#efeefb;transition:.5s}.form-control[_ngcontent-%COMP%]:focus{color:#000}.form-control[_ngcontent-%COMP%]::placeholder{color:#000000b4}\"]\n    });\n  }\n  return ModifyComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}